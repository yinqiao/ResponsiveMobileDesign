<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>Chapter 11 | Responsive Mobile Design: Designing for Every Device (Usability)</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 0.7.1">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <meta name="author" content="yinqiao">
    
    
    
    <link rel="prev" href="../source/chapter10.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-github="yinqiao/ResponsiveMobileDesign" data-level="3" data-basepath=".." data-revision="1422082738039">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/yinqiao/ResponsiveMobileDesign" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="../" >Responsive Mobile Design: Designing for Every Device (Usability)</a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="https://github.com/yinqiao" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/yinqiao/ResponsiveMobileDesign/issues" target="blank" class="issues-link">Questions and Issues</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/yinqiao/ResponsiveMobileDesign/edit/master/source/chapter11.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

	

        
        <li class="divider"></li>
        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="source/chapter9.html">
            
                
                    <a href="../source/chapter9.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Chapter 9
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="source/chapter10.html">
            
                
                    <a href="../source/chapter10.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Chapter 10
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="3" data-path="source/chapter11.html">
            
                
                    <a href="../source/chapter11.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Chapter 11
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 100%;min-width: 66.66666666666667%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../source/chapter9.html" title="Chapter 9" class="chapter done new-chapter" data-progress="1" style="left: 33.333333333333336%;"></a>
    
        <a href="../source/chapter10.html" title="Chapter 10" class="chapter done new-chapter" data-progress="2" style="left: 66.66666666666667%;"></a>
    
        <a href="../source/chapter11.html" title="Chapter 11" class="chapter done new-chapter" data-progress="3" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_6">
                    
                        <h2 id="11-">第11章 图像压缩</h2>
<p>When it comes to the visual brilliance of design, file formats might not be the first thing you think of. In fact, it might not even register as something you need to think about at all. When working with mobile devices, the file type you use can mean the difference between happy users who love your site and users who are just happy they can find the information elsewhere.
In this chapter, you learn about image file types, including when best to use each format, and you learn about various compression options to make sure you give users an optimized experience.</p>
<p>Image Types
Depending on the job you have, you might have some familiarity with various image file types. You might already know that most cameras and smartphones take pictures in the JPEG format. You might also be familiar with OS X and know that taking screenshots will output PNG files.
You are also undoubtedly aware that using various image-manipulation programs, such as Adobe Photoshop, Pixelmator, Acorn, and GIMP, enable you to save images in a variety of formats.
What you might not know is when you should use each format, or even why so many different formats are available.
JPEG/JPG
The JPEG, or JPG, image format is a common lossy format that is used primarily in digital photography. When you take a picture with your tablet, smartphone, or digital-SLR, there is an extremely good chance that your image will be saved as a JPEG image.
Note
Images are saved in either a lossless or a lossy format. Some image containers, such as PNG, offer both lossless and lossy saving options. When an image is saved as lossless, all information to display that image is retained. When a lossy format, such as JPEG, is used to save an image, calculations are made that reduce the overall size of the image, but at the cost of destroying the original data. The new image has new data; if edited and saved again in a lossy format, it will lose more detail. This process adds distortion, loss of color, and diminished clarity, and it can add artifacts to the image.
JPEG images can be saved at various quality levels that change both the information contained inside the image and the overall file size. The compression used in JPEG files is beneficial because, even in Photoshop, saving a file at the High setting saves the file at around 60% qual- ity. Figure 11.1 illustrates how the same file appears at two different quality levels.
As you can see, the higher the quality setting, the sharper the image and the less “artifacting” that’s visible in the final image.</p>
<p>Figure 11.1 An image saved at the highest quality setting (left) appears different from one saved at the lowest (right).
Tip
JPEG files can be saved normally or can be saved as an interlaced format called progressive. The progressive format might be slightly larger, but when rendered on a web page, it gives the illusion of loading quickly because it makes several “passes” as it is drawn. This tricks the mind into believing that the page is loading fast, and it helps eliminate page reflow because some of the image is displayed as it is downloaded.
As a designer, you should use JPEG images any time that you need large images or images with hundreds or more colors. Anytime you are displaying something with a complex color scheme (such as skin), you should be using a JPEG.
Because the file size of your JPEG image is determined by the information contained in the image, you can decrease file size and increase visual guidance by blurring or desaturating areas of an image to reduce the data needed to replicate thousands of accurately reproduced pixels. Figure 11.2 demonstrates how this is accomplished and the effects of doing so.
Consider some other facts about the JPEG image format:
■ JPEG files have a maximum resolution of 65535x65535.
■ Because of the lossy format, repeatedly editing and saving a JPEG file will cause degrada- tion over time. Always keep an original for editing instead of editing a copy of a copy.
■ Currently, all modern and most legacy browsers support JPEG files.</p>
<p>Figure 11.2 By blurring and desaturating the background (top), the focus is clearly on the subject and the file size is decreased to 36KB from 108KB when compared to the original (bottom).
GIF
The Graphics Interchange Format (GIF) tends to instantly conjure up one of two things: Either you are a user who instantly thinks about funny cats, stupid tricks, or both in short, no-sound videos, or you think of transparent logos or low-color images.
The GIF format starting seeing use from CompuServe in 1987, and it very quickly ruled the entire landscape of pretty much all GeoCities websites (don’t try to pretend you don’t remem- ber—I know that you still have nightmares about those heady days). These were the times of simple looping animation, and it was just about the only way to add a little special something into the fledgling web.
GIF files serve a greater purpose than just allowing users to view short clips, spinning globes, or even page loaders. The GIF file is perfect for use with single- or few-color items, such as logo images. For comparison, Figure 11.3 shows a GIF file and a JPEG file.</p>
<p>Figure 11.3 The GIF image (top) is 5KB; the JPEG (bottom) is 13KB.
GIF files also support transparency, which is a wonderful feature, but this does come at a cost: The image must have a stroke applied that matches the background, or the images will appear chipped or blocky around the transparent areas. Figure 11.4 demonstrates the use of transpar- ency with a GIF file.</p>
<p>Figure 11.4 Both images are transparent; however, the one on the right has a stroke applied, making it appear without jagged edges
Consider some other facts about GIF files:
■ GIF files support a 256-color palette.
■ GIF files use LZW lossless compression.
■ GIF is officially pronounced like Jif, the peanut butter brand.
■ All modern and most legacy browsers support GIF files.</p>
<p>PNG
Thanks to the deficiencies in the GIF file format (not to mention problems with licensing agree- ments between Unisys and CompuServe), the Portable Network Graphics (PNG) format was created.
The goal of the PNG format was to become not only the replacement of the GIF image format, but the main image format used on the Internet.
With PNG, almost everything you would want in an image format is present. PNG contains much better transparency support than GIF, and it has a very wide colorspace, allowing you to save images with the same amount of color as in JPEG.
In fact, if you find yourself creating any type of pattern or gradient with a JPEG, you will see sharper results by switching to PNG. This is because of the accurate color reproduction and the lossless compression. JPEG files will have some degree of artifacting present.
A trick you can use when saving PNG files is to use Posterize in Photoshop. Posterizing your image reduces the number of tones in your image. If you apply too much of the effect, your image will lose fine details and depth. To do this, edit your image and then choose Image -&gt; Adjustments -&gt; Posterize from the File menu. The fewer levels you use, the smaller the image will be. When posterizing your image, it is important that you inspect your image, or you might end up losing some detail. Figure 11.5 demonstrates the files and savings of using this technique.</p>
<p>Figure 11.5 The original image (left) is 18KB, and the posterized image (right) is 16KB.
The difference between each image is extremely subtle. This shows the effectiveness of poster- izing your images to save file size and still be able to display a high-quality image. Note that the image also contains transparent areas. Unlike in GIF images, these areas do not have jagged edges, but are instead displayed smooth.
Consider some other facts about the PNG file:
■ All modern browsers support PNG files, but not all legacy ones support transparency.
■ Even though PNG is a newer format, GIF files can still be smaller on some images.</p>
<ul>
<li>PNG files use lossless file compression, enabling you to edit and save the same file over and over without worrying about data loss.
■ PNG files can be animated (APNG), but browser support is very limited and is a safe bet only when working with Firefox.</li>
</ul>
<p>WebP
One of the newest image formats available is WebP. This format has a deep history in video compression from the VP8 codec. It was constructed using technology originally developed by On2 and is now championed by Google. Utilities to convert and compress images into WebP are available at <a href="https://developers.google.com/speed/webp/" target="_blank">https://developers.google.com/speed/webp/</a>. Some image-manipulation programs also include support to export in this format. Pixelmator (www.pixelmator.com/) is one of these programs.
The WebP format is similar to the PNG format, in that it allows a very high number of colors and transparency support. This makes WebP suitable for use as a JPEG, GIF, and PNG replacement.
WebP files offer some fantastic gains in reducing file size, and with very little (if any) visual dis- turbance. Figure 11.6 demonstrates the differences among various image formats.</p>
<p>Figure 11.6 Not only is there very little difference in each format, but WebP is the smallest of all.</p>
<p>It is worth noting the file sizes of each of the images shown in Figure 11.6:
■ PNG: 153KB
■ GIF: 42KB
■ JPEG: 30KB
■ WebP: 18KB
The savings WebP offers are not only considerable, but are lifesaving when considering the image payload you are sending to your mobile users.
Consider some other facts about WebP:
■ WebP images can be animated like GIF files.
■ WebP offers both lossy and lossless compression.
■ The maximum resolution of a WebP file is 16384×16384.
■ Browser support for WebP is limited to Chrome and Opera browsers (see <a href="http://caniuse" target="_blank">http://caniuse</a>. com/webp for updated support).</p>
<p>Compression Utilities
Knowing the type of image format to use is half the battle, as a popular 1980s cartoon would say. The other half comes from using various compression utilities.
In more than one meeting, I have literally dropped the jaws of those attending when I have taken the images from their site and, while discussing site strategy, shown them that their images are 10% to 25% too large.
How was I able to do this? By using the correct tools and adding a measure of corrective judgment. Let me show you the tools I use on a regular basis.
JPEGmini
JPEGmini (www.jpegmini.com/) is both a web service and an application. It works by optimiz- ing the parts of a JPEG image that take up space but are not seen by your eyes. Note that this service works best with images taken with your DSLR or digital camera. If you use it with images that have already been compressed, the savings will be much less substantial. This sounds a little far-fetched, but if you give the service a try, you will find yourself pleasantly surprised.
The web service is easy to use. Start by visiting www.jpegmini.com/main/shrink_photo and then drag a photo from your computer into your browser (or use the upload image feature). Your image will then be processed and the new image will appear, along with technical data about how much space was saved.</p>
<p>If you run a design house, you might be interested in using the server technology JPEGmini pro- vides to autoprocess your images in a batch process.
Two versions of the desktop application are available for Windows and OS X. The differences between them are the size of the files that can be processed, the speed of processing, and whether you need an Adobe Lightroom plugin.
PNGGauntlet
PNGGauntlet (<a href="http://pnggauntlet.com/" target="_blank">http://pnggauntlet.com/</a>) is a Windows application that compresses PNG files.
If you have ever worked with PNG file compression, you might have heard of PNGOUT, OptiPNG, and DeflOpt. These optimization applications for PNG files help reduce file size while keeping quality. PNGGauntlet combines all three of these applications into one and lets you process your files with it.
In this easy-to-use application, you pick an output folder and then drag and drop images into the application (or use the Add Images button). The files will immediately start processing.
Occasionally, I have found that the application might seem like it is “freezing,” but this is because of the intense math operations that the application is performing to process your images.
Radical Image Optimization Tool
Another one of the applications I use when I am developing on a Windows computer is the Radical Image Optimization Tool (RIOT).
RIOT (<a href="http://luci.criosweb.ro/riot/" target="_blank">http://luci.criosweb.ro/riot/</a>) is available as either a standalone Windows application or a plugin that works with other image-manipulation programs, such as GIMP (www.gimp.org/).
This application is one of my favorite image utilities because it works with JPEG, GIF, and PNG files. It uses a dual-pane view so that you can visually compare your compression changes with the original file instead of using the “guess, optimize, repeat” approach that command-line and similar utilities often leave you with.
RIOT also contains more than just compression options. You can change masking, levels, color, and a slew of options based on the image format.</p>
<p>ImageAlpha
ImageAlpha (<a href="http://pngmini.com/" target="_blank">http://pngmini.com/</a>) is my favorite PNG compression utility. This application runs on OS X and is available for free.</p>
<p>The magic behind ImageAlpha is that it takes a lossless 24-bit PNG image (or any PNG file) and changes the compression to lossy and the colorspace to 8-bit. This affects your ability to edit the image over and over (due to the lossy compression), but for most production images, this shouldn’t be a problem.
Personally, I use ImageAlpha as part of a manual process. This gives me the opportunity to review the images and make sure I am getting the most compression with the least amount of visual disturbance.
An example workflow follows:</p>
<ol>
<li>Save the PNG file in Adobe Photoshop using the Save for Web feature and choosing the PNG-24 preset.</li>
<li>Open ImageAlpha and make adjustments using the preview window to see what your changes look like.</li>
<li>Save the image and check the box to further process the image through ImageOptim.
By following this workflow, I saved 202KB (77%) from the original. Figure 11.7 shows both
images side by side for comparison.</li>
</ol>
<p>Figure 11.7 The original export is 264KB (left); the compressed file is 62KB (right).</p>
<p>Even if you are using automation, you can still get some incredible gains, but I strongly recom- mend reviewing files manually to make sure you are getting the best compression without sacrificing excessive quality of your image.
ImageOptim
ImageOptim (<a href="http://imageoptim.com/" target="_blank">http://imageoptim.com/</a>) is my second-favorite image compression utility. This is another OS X–only application, and it works with PNG, GIF, and JPEG files.
In fact, it is a fancy application wrapper for PNGOUT, Zopfli, Pngcrush, AdvPNG, OptiPNG, JpegOptim, jpegrescan, jpegtran, and Gifsicle. You could run each of these tools by yourself, but why go to all that effort when ImageOptim does this for you?
Using ImageOptim with your images is as easy as opening the program and dragging the images you would like optimized into it. Note that it overwrites your originals, so you might want to make a new folder that contains the images you would like compressed and then use those files.
As mentioned earlier, ImageOptim works very well when used in tandem with ImageAlpha. I have even found it extremely useful on images that I have already compressed with JPEGmini.
If you have access to OS X, this is a must-have application for your toolkit.
TinyPNG
TinyPNG (<a href="https://tinypng.com/" target="_blank">https://tinypng.com/</a>) started out as a fantastic website that works much like JPEG- mini. It allows users to upload PNG files and have them returned in a refined and optimized fashion.
Really, it comes down to quantization of your uploaded file, as well as changing bit depth for colors and mucking about with the transparency a bit. But the results are fantastic; you can save anywhere from 50% to 80% on file size.
A relatively new feature that TinyPNG has pushed is an accessible developer API. This might not seem like a big deal on the surface, but having the capability to leverage its compression service inside your own company or freelance tooling is an exciting prospect.</p>
<p>Another new feature it has available is a plugin for Adobe Photoshop. This affordable plugin adds a wider spectrum of PNG support to the program and enables you to export images as needed or in batch, all with the compression you would expect from using the online service.</p>
<p>Compression Results
Even choosing the right image format and compressing it properly might not be enough to get you to start doing it. Looking at the statistics of your site and seeing how much data you can save might just help tip the balance and get you to start using the right images. An interest- ing discovery by the web team at Etsy showed that adding just 160KB of images to the site increased the mobile bounce rate by 12% (<a href="http://programming.oreilly.com/2014/01/" target="_blank">http://programming.oreilly.com/2014/01/</a> web-performance-is-user-experience.html).
You can start gathering information in multiple ways, but I find that the easiest way is to download and install a copy of Mozilla Firefox (www.mozilla.org/en-US/firefox/new/) and pick up the excellent Web Developer extension by Chris Pederick (<a href="http://chrispederick.com/work/" target="_blank">http://chrispederick.com/work/</a> web-developer/).
When you have those both installed, browse to the site you would like to audit. Auditing your own site will give you the best perspective, but you can always audit a competitor or someone who has a similar design or flow to what you have.
After you have arrived at the site, click Information and then click View Document Size in the Web Developer Toolbar. A new page should appear and display page statistics. Figure 11.8 shows the menu option and the results screen.</p>
<p>Figure 11.8 Click View Document Size (left) to get a generated report in a new tab (right).</p>
<p>As you can see from my report, I have 74 images on the page, which are taking up 429KB of space.
Of those 74 images, I have access to 49 of them, totaling 283.9KB. Figure 11.9 shows my results of running those 49 through ImageOptim.</p>
<p>Figure 11.9 ImageOptim gives some impressive results.
As Figure 11.9 shows, I was able to shrink at least one image by 85.2%, and overall, I was able to save 24.5%, leaving me with 214KB worth of images instead of 253.9KB.
Remember that this was on just one page. If you can save even 10% across your entire site, that will get you one step closer to a successful site across any device and platform.</p>
<h2 id="">总结</h2>
<p>In this chapter, you learned about different image formats, as well as the appropriate time to use each one. You learned that the WebP format is an up-and-coming solution to delivering very flexible imagery with minimal file size.
You also learned about some very helpful tools that you can use on Windows or OS X, or on the web as a service. These tools and applications can help you get the most out of your images so that mobile users can enjoy them and see the beauty of your work.
You also saw an example of why serving these optimized files is essential for your mobile users.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../source/chapter10.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Chapter 10"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
