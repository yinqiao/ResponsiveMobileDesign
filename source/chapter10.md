## 第10章 响应式视频

When you want to inform, entertain, and give a broad overview with a semi-captive audience, using a video is a great way to communicate your message. If you can get your video to be shared socially or “go viral,” you can be sure you’re on the right track, and your campaign will definitely see the boost.

如果你想通过吸引受众的方式通知、娱乐或是提供一个概览，那么使用视频是一种很好的表达方式。如果你能让你的视频通过社交方式进行共享或是“病毒式传播”，那么你可以确定你在正确的轨道上，你的竞选一定会看到票数增加。
How you handle the playback of your video, however, can either keep people coming back or break your campaign apart. In this chapter, you learn about video as a medium and how to make sure that it plays back on as many devices as possible.￼￼￼￼￼￼￼￼
如果你可以控制视频的重播率，也可以吸引用户回返。本章中你将学到使用视频作为中介，并确保视频在尽可能多的设备上进行播放。
## Using Video
## 使用视频The way mobile users act is a rather fascinating subject. When it comes to searching or browsing a site, they have little patience for a bad interface; and if they can find the information or product somewhere else, they won’t hesitate to leave your site and go there instead. However, when it comes to using social networks, video-sharing sites, and entertainment hubs, they will happily waste minutes to hours to get the content they want.

移动用户行为的方式是相当吸引人的课题。搜索或浏览一个网站的时候，用户对糟糕的界面几乎完全没有耐心；如果能看到信息或产品之外的东西，用户会迫不及待地离开你的网站前往。然而，如果使用的是社交网络、视频分享网站或者休闲娱乐中心，用户为了得到他们想要的，会开心地花费几十分钟甚至几个小时。
People love to share things. They love to be first and to get credit for being the first to pin, plus, like, share, or mention something. This why using a video can be what tips the balance in making a user complete a purchase.
人们热爱分享。人们热爱第一，喜欢是第一的信誉，另外，喜欢分享和谈论。这是为什么使用一个视频可以是在一个用户完成购买时的平衡。Even if the product isn’t something you currently need, or even something you were thinking of purchasing, watching a video makes you more likely to think of it and could increase the odds of your completing a purchase later.

即使这个产品不是你现在需要的东西，甚至并不是你正在考虑购买的东西，但是看一段视频更有可能让你去思考这个产品，可以增加你完成购买的可能性。An interesting development that has swept social media sharing is the advent of sharable short videos. Popular social applications such as Vine and Instagram both feature short videos as a means of sharing. This doesn’t mean you should be making 5- to 15-second videos, but it does mean that there is a demand for fast, easy-to-share videos.

可共享的短视频的出现促进了社会媒体分享的引人关注的发展。流行的社交应用，例如Vine和Instagram，都有短视频分享的功能。这并不意味着你应该做5-15秒的视频，但它确实意味着用户有快速、易于共享视频的需求。As with standard site performance, with videos, the faster you can deliver the message the better it is going to be received. In this regard, it is very important that you use a quality provider or else have a content delivery network (CDN) provider that can keep pace with your distribution and demand.
与标准站点性能类似，通过视频，你可以交付消息的速度越快将收效越好。在这方面，速度是非常重要的，你可以使用一个质量提供者或其他内容分发网络(CDN)提供者，可以跟上你的视频分发和需求。
小贴士Using a CDN has the potential to speed up your content delivery. This is accomplished by hosting your content on multiple servers in various parts of the world. Whenever a user requests an asset from the CDN, the server closest to the user responds and sends the asset. The greater the distance from a user to your content, the bigger the benefit of using a CDN. Several popular CDN providers that you might want to take a look at are Akamai, CloudFlare, MaxCDN, and Limelight Networks.

使用CDN可以潜在地加快内容分发速度。这是通过在世界的各个地区在多个服务器上托管你的内容来达到提速效果的。当用户请求在CDN上的资源时，距离用户最近的服务器响应并发送资源。与用户的距离越远，使用CDN的好处越大。可能想看一看几种流行的CDN提供商：Akamai、CloudFlare、MaxCDN和Limelight Networks。
## 分发系统You can use a variety of ways to get the videos from your server to the device your consumer is using. The price of doing this varies considerably based on the features you need to accomplish your distribution goals.

你可以通过多种方式为你的用户所使用的设备服务。这么做的成本是根据你需要完成你的销售目标而变化的。
Before deciding on a content provider, you need to consider the following:■ Available bitrate■ Device-specific playback■ HTML5 versus Flash player■ CDN availability■ Minimum transfer speed■ File size constraints■ Social sharing options■ Player customization■ Video protection, including region and domain locking■ Ad integration support
在决定选用哪家内容提供商之前，你需要考虑以下几点：
* 可用比特率
* 是否支持指定设备播放
* 支持HTML5 或 Flash player
* 是否支持CDN
* 最小传输速率
* 文件大小限制
* 社会共享选项
* 玩家定制
* 视频保护，包括地区和区域锁定
* 广告集成支持Knowing what your needs are up front will save you from an expensive contract and from not getting the features that you need.

你需要预先了解以上几点，以避免签了昂贵的合同却没有得到你所需要的功能。### Limelight 网络Limelight Networks (www.limelight.com/) is a content delivery network (CDN) that provides services for content, application, and video delivery. It provides a solution that is geared toward enterprise users, but I have found the staff to be friendly and willing to help meet your personal needs.
Limelight 网络(www.limelight.com/)是CDN服务商，提供内容服务、应用服务和视频分发。它提供面向企业用户的解决方案，但我发现他们的工作人员是非常友好的，乐于帮助满足你的个人需求。Key features of using Limelight Networks for video distribution include these:■ Worldwide CDN to distribute video■ HTML5 video playback available■ Domain locking for content available■ FTP video upload■ Branded video player■ Video player with available bandwidth detection■ Transcoding services available■ iOS friendly■ Video analytics■ Advertisement support■ Social sharing options■ Playlist support■ Custom content channel creation

使用Limelight网络视频分布的关键特性包括这些：
* 全球CDN分发视频
* 支持HTML5视频回放
* 内容可区域锁定
* 支持FTP上传视频
* 品牌视频播放器
* 视频播放器支持可用带宽检测
* 支持代码转换服务
* 支持iOS
* 支持视频分析
* 支持广告
* 社交分享选项
* 支持播放列表
* 支持创建自定义内容频道Being able to change the bitrate of the video streaming to the device viewing the video is important because it allows users to spend less time buffering and more time watching your content. Limelight is a very competitive solution that is actively improving its services to exceed the offerings of its competitors. The Limelight website does not offer pricing information, but signing up for a free trial gets you in touch with a representative who will be more than happy to customize a plan to fit your needs.
在视频播放的过程中能够调节比特率的变化是非常重要的，因为这样可以减少用户花在缓冲视频上的时间而花更多的时间观看内容。Limelight是一个非常有竞争力的解决方案，非常积极提升自己的服务质量以超越同行竞争者。你注册一个免费试用账号，Limelight的销售代表会乐意定制一个计划来满足你的需要。
### AkamaiAkamai (www.akamai.com/) has a reputation of being a world leader in web distribution services. It attained this reputation by providing fast, reliable services. The Sola part of the Akamai family is exclusively focused on video storage, delivery, and protection. With many offered services, the bulk of Akamai’s services lean toward the enterprise user who is looking for subscription or providers who need content protected from content thieves.
Akamai (www.akamai.com/)在网络分销服务方面具有世界级的领导者的声誉。它的声誉是通过提供快速、可信赖的服务取得的。Akamai家族的Sola部分是专门致力于视频存储、分发和保护的。Akamai的大量的服务面向需要申请公开发售的企业级用户或是需要内容保护的供应商。Some of the key features of Akamai Sola are as follows:■ Distribution from the Akamai CDN■ Domain and region lock, as well as DRM services■ Adaptive bitrate playback■ Multiple protocol support, including HLS, HDS, and MPEG-DASH■ Media analytics■ Advertisement support

Akamai Sola的关键特性如下：

* Akamai CDN分发
* 域名和区域锁定，支持DRM服务
* 自适应比特率播放
* 多协议支持,包括HLS、HDS和MPEG-DASH
* 媒体分析
* 广告支持Akamai is in the same category as Limelight Networks, so getting a price is heavily geared toward working with a representative that will customize the service to your needs.Akamai同Limelight一样引人注目，所以与销售代表所谈最重要的是满足你的需求的定制服务。### BrightcoveOne of the newer video content providers, Brightcove, has radically evolved in the past few years from a simple content provider to one of the leading-edge video distributors. It offers a product called Video Cloud with a varied pricing model that works for everyone from small business to mammoth enterprise users. As a premier leader, it offers many of the same features as other competitors.

Brightcove是新的视频内容提供商之一，在过去几年中从一个简单的内容提供者迅速发展到尖端视频分销商。它提供了一个产品，叫做视频云，适合从小型企业到大型企业用户的不同定价模型。它提供了与其他竞争对手许多相同的功能。Key features of Brightcove Video Cloud include these:■ Transcoding services■ Media analytics■ Custom players■ HTML5 playback support
* Mobile device support■ Bandwidth and bitrate detection■ Bulk upload transcoding service■ Capability to schedule and synchronize video upload to YouTube channels■ Advertising support■ Domain, region, and DRM support (RMTPe and SWF)
Brightcove视频云的关键特性包括：
* 转码服务
* 媒体分析
* 玩家定制
* 支持HTML5回放
* 支持移动设备
* 带宽和比特率检测
* 批量上传代码转换服务
* 支持定制和同步视频上传到YouTube
* 广告支持
* 域名、区域和DRM支持（RMTPe和SEF）Because this is a newer service, you might have reservations about the quality and reliability of service. However, I have used Brightcove on projects over the last three years and have found that it readily meets the demands of users and also constantly upgrades and improves its current offerings. It has a helpful support staff and is quick to reply to emails and calls. If you are seriously looking into adding video playback into your site, Brightcove is worth your consideration.

由于Brightcove是一家新的服务公司，你可能会怀疑其服务的质量和可靠性。不过，我在过去3年使用Brightcove的过程中发现，它的确能满足用户的需求，并且保持持续更新和提升服务。它有一个有效的运维支持团队并且邮件、电话都能快速响应。如果你是认真考虑添加视频播放到你的网站，Brightcove是值得考虑的。### VimeoVimeo (https://vimeo.com/) has fought a considerable battle against formidable foes such as YouTube. That doesn’t mean Vimeo is tired and ready to hang up the towel, though. On the contrary, it is rolling out new features, support, and plans for meeting even the most demanding video sites.

Vimeo (https://vimeo.com/)遇到了相当强大的对手例如YouTube。但这并不意味着Vimeo准备偃旗息鼓。相反地，Vimeo不断地推成出新，新功能、新支持，甚至是面对最苛刻的视频网站。As one of the first sites to allow user-uploaded videos that could go beyond the 10-minute mark without a special seal of approval, Vimeo has gained a reputation for hosting strikingly visual masterpieces that are more akin to a fully funded production effort than user-produced videos.
作为第一个允许用户上传超过10分钟的视频而不需要审批的网站，Vimeo赢得了托管惊人视觉的杰作的名声，与用户生成视频相比，更像一个完全自生产视频。
Features available with Vimeo are as follows:■ Embeddable video■ Customizable branded video player*■ Video groups■ Video channels■ Video albums■ Analytics*■ Domain-restricted videos*■ Vimeo On Demand*■ Transcoded video
Vimeo的特性如下：

* 可嵌入视频
* 可定制的品牌视频播放器 *
* 视频组
* 视频频道
* 视频专辑
* 视频分析 *
* 视频区域限制 *
* Vimeo On Demand *
* 视频转换Multiple account types are available, and each has a slightly richer feature set. If you are a business user, Vimeo is worth looking at because it has reasonable storage limits and one of the best bandwidth policies of most video-streaming services. Also a plus for those who would like to sell videos, the Vimeo On Demand feature allows you to sell your content.

可用多个账户类型，而且每用户都有丰富的功能集。如果你是一个商业用户，Vimeo值得关注，因为它有合理的存储限制，并且具有视频流媒体服务最好的带宽策略。对于希望出售视频的用户来讲还有一个好处，Vimeo On Demand特点允许出售内容。### YouTubeYouTube has been the creative and quick-to-video outlet for the masses of people on the Internet who want to be discovered, share something amazing, or quickly share a video with friends and family.YouTube has continued to roll out new features, including an HTML5 video player and mobile device support, and it is the engine behind videos embedded into Google+.

YouTube是创造性地为需要查找、分享有趣内容、快速与朋友家人分享视频的互联网用户提供快速获取视频的网站。YouTube继续推出新功能，包括HTML5视频播放器、移动设备支持，并且作为视频引擎嵌入Google+。The popular features of YouTube are as follows:■ Free with Google account sign-up■ Embeddable videos■ Transcoded video■ Bandwidth detection and adjustment■ Channel support■ Integration with Google+ and Google Search■ Limited advertisement support

YouTube受欢迎的特点如下：

* 可以使用Google账户注册
* 可嵌入视频
* 视频转码
* 带宽检测与适配
* 支持频道
* 与Google+和Google搜索集成
* 有限的广告支持YouTube is a popular platform to use because it is available at one of my favorite prices: free. It also handles much of the heavy lifting, including adding ads to your videos to help generate revenue, and will create multiple versions of your video for playback on most devices. The cost of all of this is the fact that, when your video is finished playing, you get a wall of “similar” videos that might show questionable content or direct your viewers to another product or service or an unflattering review of your brand. That is not to say that you shouldn’t still leverage the power and influence of YouTube—just be sure to consider the cons before committing to using it as your only streaming provider.

YouTube是一个流行的视频平台，因为它支持我最喜欢的价格：免费。它还处理很多重活累活：包括统计在视频上添加广告来产生收入，支持在大多数设备创建多个版本的视频。成本就是当你的视频播放完成，你会得到一个“类似”的视频，显示墙会显示游览者可疑的内容，或直接将你的观看者引导到另一个产品或服务，或者甚至有直言不讳的评论。这鞋并不是暗示你不应该利用YouTube的能力和影响力，只是说在决定使用YouTube作为你唯一的流媒体提供者之前一定要考虑的缺点。## Making Videos Fit Mobile Devices
## 制作适配移动设备的视频After you decide on a service to use as your video provider and you upload your video, it is time to add the video to your page.Unfortunately, when it comes to mobile devices, this is not a simple plug-and-play process. Figure 10.1 shows what happens when a video that has not been optimized for mobile devices is played back on a mobile device.

在你决定了一项服务作为你的视频提供者之后，你上传你的视频，现在是时候将视频添加到你的页面上了。不幸的是，当在移动设备查看时，并不是简单的即插即用的过程。图10.1展示了当视频没有对移动设备进行优化时在移动设备上播放的情况。Figure 10.1 The video is not properly sized for the screen.

图10.1 视频的尺寸对屏幕不适配。This doesn’t completely stop users from enjoying the video, though, and they should have the option to make the video go full screen.Another problem that you might face is launching the video into a modal. 

这虽然并不能完全阻止用户观看视频，但是他们应该有一个适配屏幕的选项。启动视频窗口时你可能会面临另一个问题。
Figure 10.2 shows a possible issue when using video playback with a modal window.

图10.2显示了在使用视频回放模式窗口上的一种可能发生的问题。Figure 10.2 shows a terrible UI. Even worse, the user might not be able to close the modal without reloading the page, touching the Back button, or leaving your site.

图10.2展示了很糟的UI效果。更糟糕的是，用户如果不通过点击后退按钮或者离开你的网站的方式，在无需重新加载页面的情况下可能无法关闭视频窗口。### Using Intrinsic Ratio### 使用固定比例With both the issues shown in Figure 10.1 and 10.2, the video player is not properly sized to the device. You can solve this by using the same intrinsic ratio logic used in dealing with responsive images. To see how this works, consider an example YouTube video.
在图10.1和图10.2上显示的视频播放器尺寸对设备都不适配。你可以通过与响应式图片类似的方法，通过视频比例来解决这个问题。为了查看一下工作原理，以YouTube视频为例。
Figure 10.2 The modal window is bigger than the screen viewing it, making the video—and, more importantly, the Close button—completely inaccessible. It also is confusing because a user might have no idea why the screen has gone almost completely black, with no way to start or stop the video.

图10.2视频窗口比观看屏幕大，导致视频和关闭按钮不可见。这也导致用户产生困惑，因为用户不知道为什么屏幕看不见甚至完全回退，没有开始和停止视频的按钮。If you have ever used the embed code from YouTube, you should recognize the following:
如果你曾使用过YouTube的内嵌视频代码，你会认出如下代码：	<iframe		width="640"		height="360" 		src="//www.youtube.com/embed/yXXZSbx2lrc" frameborder="0"		allowfullscreen>	</iframe>
Nothing is wrong with the iframe code, per se; however, it does not contain any code to help the video fit the device that is viewing it. Figure 10.3 demonstrates how the video is viewed on a mobile device.
iframe本身的代码没有错，但是不包含任何代码来帮助适应设备视频。图10.3显示了该视频在移动设备的展示效果。Figure 10.3 Even though the site is responsive, the embedded video is not and breaks out of frame.

图10.3 即使网站是响应式，但是嵌入的视频不是响应式导致超出边界小贴士Remember that when using an intrinsic ratio, you need to know the aspect ratio of the video. Generally, most videos have an aspect ratio of 4:3, 3:2, or 16:9.

当使用固定比例时，你需要知道视频的长宽比。通常来说，大多数的视频比例是4:3、3:2或是16:9。If you need to figure out the aspect ratio of your video, you will need the pixel values for the width and height of your video. You can then use a ratio calculator to get the aspect ratio that will be used to figure out the intrinsic ratio. A calculator is available to help you figure out the intrinsic and aspect ratios at www. mobiledesignrecipes.com/ratio-calculator/.

如果你需要计算视频的长宽比，你需要知道视频的宽度和高度。可以使用比例计算器计算长宽比，用来找出固定比。计算器有助于计算固定比和纵横比，可参考www. mobiledesignrecipes.com/ratio-calculator/。To make this work, you need to add the HTML for a container that you can use to attach the intrinsic ratio to:
你需要一段HTML代码作为固定比例视频容器：
    <div class="video-wrapper">
        <iframe
        class="video"
        width="640"
        height="360" src="//www.youtube.com/embed/yXXZSbx2lrc"
        frameborder="0"
        allowfullscreen>
        </iframe>
    </div>
    Note that the formatting of the code has been changed for readability; otherwise, the entire iframe element would be on one line. Now that the HTML has been taken care of, you need to add the styles that will make the video scale to fit the screen:

注意，为了提高可读性已调整了代码的格式，否则，整个iframe元素将在一行上。现在有了HTML结构，需要添加将使视频规模以适应屏幕的样式表：    .video-wrapper {
        position: relative;
        padding-bottom: 56.25%;
        height: 0;
    }

    .video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
In this CSS snippet, the intrinsic ratio is used to set up the padding-bottom value. The current value of 56.25% works for videos with an aspect ratio of 16:9. Depending on the aspect ratio of your video, you need to change this value. To determine the value you should use, you can use the ratio calculator at www.mobiledesignrecipes.com/ratio-calculator/.

在本段CSS代码中，使用固定比例设定padding-bottom的值，本段代码中固定比例的值是56.25%，正好是16:9视频的固定比例。根据你的视频宽高比，需要更改这个值。你可以通过网站www.mobiledesignrecipes.com/ratio-calculator/来计算你所需要使用的固定比例。With the HTML and CSS in place, the video should now scale to fit the device viewing it. Figure 10.4 shows the video playing back on a mobile device.设置好HTML和CSS，视频应该可以适配设备的屏幕了。图10.4展示了适配移动设备屏幕比例的视频效果。### Using the Native Player
### 使用本地播放器
Another option to consider is having your video play in the native video player of the device. Using the native player offers many benefits, including these:■ Users are more likely to understand how the player works.■ Lower bitrates can be used for more device compatibility.■ Video can be streamed without a third-party service.

另一可考虑的选择是让你的视频在本地设备的视频播放器上播放。使用本地播放器播放有许多好处，具体如下：* 用户更容易理解玩家是如何工作的。
* 低比特率可用于设备的兼容性。
* 视频可以不通过第三方服务提供。Using the native player is triggered by serving a “native” file to the device. This can be done by linking directly to the file, using a shortened URL, or even using a QR code that forwards directly to a video.

使用本地播放器是由“本地”文件到设备。这可以通过直接链接到文件，使用短URL，或甚至使用二维码直接转发视频。Figure 10.4 The size of the video now changes to match the size of the screen that is viewing it.
图10.4 现在视频的大小与屏幕的大小进行适配了。To see this in action for yourself, open the browser on your mobile device and go to http://goo.gl/rqlkHC.

通过你自己的移动设备打开http://goo.gl/rqlkHC便可查看。小贴士
If you decide to use a short URL or a QR code, it is important that you strongly consider using a landing page to launch or watch the video. This gives users something to read or look at while they wait for the video to download, buffer, and start playback. Try using the link http://goo.gl/B4t9ry to see what a landing page could look like instead of launching directly to the native player.

如果您决定使用短URL或二维码，你可以考虑使用一个加载页来加载或观看视频是很重要的。这可以在用户等待视频下载、缓冲、开始播放时有内容可看。在http://goo.gl/B4t9ry可以看到，在加载页可以显示什么，而不是直接将用户导向本地视频播放器。If you do not happen to have your mobile device available, the link also works in any browser that can play back MP4-encoded videos, such as Chrome. Figure 10.5 shows what the native player on an Android device looks like.

如果不是通过移动设备上打开，通过任意浏览器例如Chrome浏览器打开，可以回放MP4格式视频。图10.5展示了Android系统的本地播放器。Figure 10.5 The video is displayed full screen, and the Play/Pause button as well as the scrubbing controls are currently visible.

图10.5 视频全屏显示，播放、暂停按钮以及整个控制条已完全可见。### Using a PluginIf you decide that you do not want to handle figuring out any ratios or cluttering up your styles with extra entries, you might want to opt for a JavaScript plugin.

如果你决定不想添加额外的条目进行任何比率的处理，以避免弄乱你的代码风格，你可能会想要选择使用JavaScript插件。One of my favorite plugins for handling responsive video is FitVids.js (http://fitvidsjs.com/). This is a jQuery plugin that can be used with popular video-sharing sites such as YouTube and Vimeo.

一款我最喜欢的处理响应式视频的插件之一是FitVids.js (http://fitvidsjs.com/)。这是一个jQuery插件，可以在流行的视频分享网站如YouTube和Vimeo等使用。The implementation of FitVids.js is beyond the scope of this chapter, but I can tell you that it is a simple plugin to incorporate into your site. For documentation, including how to incorporate FitVids.js into your site, visit the GitHub site at https://github.com/davatron5000/FitVids.js/.

FitVids.js的具体实现细节超出了本章的讨论范围，但是我可以告诉你这是一个可用于你的网站的简单的插件。关于使用示例和如何在你的网站使用FitVids.js，请访问GitHub：https://github.com/davatron5000/FitVids.js/。## 总结In this chapter, you learned about why using video in your site matters, and you discovered some providers that you can leverage for content delivery.You also learned why responsive videos are important and how to make them responsive on your site. This is accomplished by using the intrinsic ratio, the native device player, or a plugin such as FitVids.js.在本章中，了解了为什么在你的网站使用视频非常重要，而且你发现通过一些供应商可以利用内容分发。
你还了解了响应视频为什么如此重要，以及如何在你的网站使用响应式视频：可以通过固定比例、本地播放器以及JavaScript插件如FitVids.js等。